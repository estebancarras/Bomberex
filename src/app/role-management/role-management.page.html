<ion-header>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-menu-button></ion-menu-button>
        </ion-buttons>
        <ion-title>Gesti√≥n de Roles</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-grid>
        <ion-row>
            <ion-col size="12">
                <table>
                    <thead>
                        <tr>
                            <th (click)="sortBy('name')" style="cursor:pointer;">
                                Nombre
                                <ion-icon *ngIf="sortField === 'name'"
                                    [name]="sortDirection === 'asc' ? 'arrow-up' : 'arrow-down'"></ion-icon>
                            </th>
                            <th (click)="sortBy('email')" style="cursor:pointer;">
                                Correo
                                <ion-icon *ngIf="sortField === 'email'"
                                    [name]="sortDirection === 'asc' ? 'arrow-up' : 'arrow-down'"></ion-icon>
                            </th>
                            <th>
                                Rol
                            </th>
                        </tr>
                    </thead>
                    <tbody>

                        <tr *ngFor="let user of sortedUsers$ | async">
                            <td>{{ user.name || 'Sin nombre' }}</td>
                            <td>{{ user.email }}</td>
                            <td>
                                <ion-select [value]="user.role" (ionChange)="updateUserRole(user, $event.detail.value)">
                                    <ion-select-option *ngFor="let role of roles" [value]="role">{{ role
                                        }}</ion-select-option>
                                </ion-select>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </ion-col>
        </ion-row>
    </ion-grid>

    <ion-toast [isOpen]="showToast" [message]="toastMessage" [color]="toastColor" duration="2000"
        (ionDidDismiss)="showToast = false">
    </ion-toast>
</ion-content>